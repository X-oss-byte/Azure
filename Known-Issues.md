# Using Hybrid Connections for Apps with Stateful File Content (like WordPress)
Hybrid Connections provides a way to connect to on-premises resources like databases from Azure. When you migrate a site using hybrid connections, the database state stays in sync between the local and the migrated Azure version of a site, but the file content can become divergent. Care should be taken when using applications that store state or content in their file content, as this can create problems especially if actively running both the local and Azure version of the site at the same time. 
 
For example, WordPress stores media content, such as images, in the file content of the application, and blog definitions in the database. If you migrated your WordPress site to Azure and then continue to use the local site such as to add a new post with an image, the Azure site will fail to load the image for that post because it is missing from the Azure side file content. Similarly if you add a new post with media from the Azure site, then the local site will not be able to load the media. Because of this file-system content dependency in WordPress, we strongly suggest that Hybrid Connections are used very carefully for testing until ready to switch fully to the Azure site.


# Using “localhost” for Database Server Connections
When an application is using “localhost” as the server name for their database connections it will only work when running on the same machine as the database server and thus fail to connect after migration to Azure. This reference should be changed prior to migration, or the migrated site will not be able to connect to the database.
 
There are a few possible configurations you might choose for your database connection:
### Database remains in place and is internet accessible (i.e. the Azure site will be able to connect to it directly)
* If the database server can be accessed from anywhere using the correct connection details, then simply change the "localhost" db server reference(s) to use the fully qualified database server machine name instead. Confirm that the local site still works after these changes and before migration, otherwise the database server configuration is not correct for such remote connections and should be fixed prior to attempting migration. You may choose to skip Hybrid Connection setup during migration if using an internet facing database server.
### Database remains in place and is behind a network
* Hybrid connections features allows an Azure website to securely connect to an in-network database server without broadly opening the server to outside-network traffic. To use this feature you should change the "localhost" db server reference(s) to use the database server machine name instead, and then choose to configure Hybrid Connections during the migration. Confirm that the site still works locally with these changes before migration, otherwise the database server configuration will not work for a Hybrid Connection either. Once you have the local site working, use the Migration Assistant and choose to configure Hybrid Connections on the Azure Options page - the database server value used here must exactly match the server value used in the site db connection configuration.
### Database migration is occurring as a separate action
* Migrate the database separately and then change the connection string reference(s) to point to the migrated database either before or after the migration (understanding that the Azure site may not be functional until after this point). [Learn more about Azure Database Migration Service](https://azure.microsoft.com/en-us/services/database-migration/)